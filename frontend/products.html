<!DOCTYPE html>
<html>
<head>
    <title>Products</title>
</head>
<body>

<h2>Create Product</h2>

<form id="productForm">
    <input type="text" id="name" placeholder="Product name" required />
    <br><br>
    <input type="number" id="price" placeholder="Price" required />
    <br><br>
    <input type="number" id="stock" placeholder="Stock" required />
    <br><br>
    <button type="submit">Create Product</button>
</form>

<p id="msg"></p>

<script>
const token = localStorage.getItem("token");

if (!token) {
    window.location.href = "index.html";
}

document.getElementById("productForm").addEventListener("submit", async function(e) {
    e.preventDefault();

    const response = await fetch("http://127.0.0.1:8000/products", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer " + token
        },
        body: JSON.stringify({
            name: document.getElementById("name").value,
            price: Number(document.getElementById("price").value),
            stock: Number(document.getElementById("stock").value)
        })
    });

    const data = await response.json();

    if (response.ok) {
        document.getElementById("msg").innerText = "Product created successfully!";
    } else {
        document.getElementById("msg").innerText = data.detail;
    }
});
</script>

</body>
</html>